{"version":3,"file":"js/375.d7fa0c4f.js","mappings":"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","sources":["webpack://rolling/./src/stores/productStore.js","webpack://rolling/./src/stores/statusStore.js","webpack://rolling/./src/views/frontend/Search.vue","webpack://rolling/./src/views/frontend/Search.vue?ba82"],"sourcesContent":["import axios from 'axios';\nimport { defineStore } from 'pinia';\nimport statusStore from './statusStore';\n\nconst status = statusStore();\n\nexport default defineStore('productStore', {\n  state: () => ({\n    // products\n    products: [],\n    productsPage: [],\n    pagination: {},\n    productsCategory: [],\n    productsType: [],\n\n    // product\n    product: {},\n    imageUrl: '',\n    imagesUrl: [],\n    cc: 0,\n\n    // comp\n    lgCompProd: [],\n    smCompProd: [],\n\n  }),\n\n  actions: {\n    async getProducts() {\n      this.scrollToTop();\n      status.isLoadingForStore = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n\n      try {\n        const res = await axios.get(api);\n        status.isLoadingForStore = false;\n\n        this.products = res.data.products;\n        this.updateProductsCategoryAndType();\n      } catch (error) {\n        console.error('Error 找不到資料:', error);\n      }\n    },\n\n    async getProductsPage(page = 1) {\n      this.scrollToTop();\n      status.isLoadingForStore = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/products/?page=${page}`;\n\n      try {\n        const res = await axios.get(api);\n        status.isLoadingForStore = false;\n\n        if (res.data.success) {\n          this.productsPage = res.data.products;\n          this.pagination = res.data.pagination;\n        }\n      } catch (error) {\n        console.error('Error fetching paginated products:', error);\n      }\n    },\n\n    async getProduct(id) {\n      this.scrollToTop();\n      status.isLoadingForStore = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${id}`;\n\n      try {\n        const res = await axios.get(api);\n        status.isLoadingForStore = false;\n\n        this.product = res.data.product;\n        this.imageUrl = res.data.product.imageUrl;\n        this.imagesUrl = res.data.product.imagesUrl;\n        this.cc = res.data.product.content.comparison.cc;\n      } catch (error) {\n        console.error('Error 找不到資料', error);\n      }\n\n      this.licenseTax();\n      this.fuelTax();\n    },\n\n    licenseTax(cc) {\n      const license = cc;\n      if (license <= 500) {\n        return 1620;\n      }\n      if (license <= 600) {\n        return 2160;\n      }\n      if (license <= 1200) {\n        return 4320;\n      }\n      if (license <= 1800) {\n        return 7120;\n      }\n      return 11230;\n    },\n\n    fuelTax(cc) {\n      const fuel = cc;\n      if (fuel <= 500) {\n        return 900;\n      }\n      if (fuel <= 600) {\n        return 1200;\n      }\n      if (fuel <= 1200) {\n        return 1800;\n      }\n      return 2010;\n    },\n\n    setLgCompProd(product) {\n      this.updateProductArray(this.lgCompProd, product, 4);\n    },\n\n    setSmCompProd(product) {\n      this.updateProductArray(this.smCompProd, product, 2);\n    },\n\n    updateProductArray(array, product, limit) {\n      if (array.length < limit) {\n        if (!array.some((p) => p.id === product.id)) {\n          array.push(product);\n        }\n      } else if (!array.some((p) => p.id === product.id)) {\n        array.shift();\n        array.push(product);\n      }\n    },\n\n    updateProductsCategoryAndType() {\n      this.products.forEach((item) => {\n        if (!this.productsCategory.includes(item.category)) {\n          this.productsCategory.push(item.category);\n        }\n        if (!this.productsType.includes(item.content.comparison.type)) {\n          this.productsType.push(item.content.comparison.type);\n        }\n      });\n    },\n\n    scrollToTop() {\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    },\n  },\n});\n","import { defineStore } from 'pinia';\n\nexport default defineStore('statusStore', {\n  state: () => ({\n    isLoadingForStore: false,\n    cartLoadingItem: '',\n  }),\n});\n","<template>\n  <div class=\"search-box\">\n\n    <!-- title -->\n    <div class=\"title\">\n      <h1>搜尋</h1>\n      <button @click=\"goBack\">\n        <i class=\"bi bi-x text-deep\">\n        </i>\n      </button>\n    </div>\n\n    <!-- search -->\n    <div class=\"search border-box\">\n      <div class=\"search-bar\">\n        <input class=\"border-box\" type=\"text\" id=\"search\"\n          placeholder=\"請輸入車款\"\n          v-model=\"cacheProductsSearch\">\n        <button class=\"text-deep\"\n          v-if=\"!cacheProductsSearch.length < 1\"\n          @click=\"delCacheProductSearch\">\n          移除\n        </button>\n      </div>\n      <div v-if=\"cacheProductsSearch\">\n        <!-- 產品 -->\n        <label v-for=\"(item, key) in filterProductsSearch.splice(0, 3)\" :key=\"item + key\">\n          <p>{{ item.title }}</p>\n          <input type=\"radio\"\n            :checked=\"cacheProductArea.title === item.title\"\n            @click=\"getProduct(item.id)\">\n        </label>\n      </div>\n      <p v-if=\"notFoundData\">未找到符合的項目</p>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport { mapState, mapActions } from 'pinia';\nimport productStore from '@/stores/productStore';\n\nexport default {\n  data() {\n    return {\n      cacheProductsSearch: '',\n      cacheProductArea: '',\n      notFoundData: false,\n    };\n  },\n\n  computed: {\n    ...mapState(productStore, ['products']),\n\n    filterProductsSearch() {\n      const regex = new RegExp(this.cacheProductsSearch, 'i');\n      return this.products.filter((item) => item.title.match(regex));\n    },\n  },\n\n  methods: {\n    ...mapActions(productStore, ['getProducts']),\n\n    removeFilterSearch(item) {\n      this.cacheProductArea = item;\n      this.cacheProductsSearch = '';\n    },\n\n    delCacheProductSearch() {\n      this.cacheProductsSearch = '';\n    },\n\n    getProduct(id) {\n      this.$router.push(`/product/${id}`);\n    },\n\n    goBack() {\n      return this.$router.go(-1);\n    },\n\n    updateNotFoundData() {\n      const regex = new RegExp(this.cacheProductsSearch, 'i');\n      this.notFoundData = this.products.filter((item) => item.title.match(regex)).length === 0;\n    },\n  },\n\n  watch: {\n    cacheProductsSearch: 'updateNotFoundData',\n  },\n\n  created() {\n    this.getProducts();\n  },\n};\n</script>\n","import { render } from \"./Search.vue?vue&type=template&id=2fbc8cb6\"\nimport script from \"./Search.vue?vue&type=script&lang=js\"\nexport * from \"./Search.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/macbook/Desktop/project/rolling/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["status","statusStore","defineStore","state","products","productsPage","pagination","productsCategory","productsType","product","imageUrl","imagesUrl","cc","lgCompProd","smCompProd","actions","async","this","scrollToTop","isLoadingForStore","api","res","axios","data","updateProductsCategoryAndType","error","console","page","success","id","content","comparison","licenseTax","fuelTax","license","fuel","setLgCompProd","updateProductArray","setSmCompProd","array","limit","length","some","p","push","shift","forEach","item","includes","category","type","window","scrollTo","top","behavior","cartLoadingItem","class","_createElementVNode","_hoisted_4","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","onClick","_cache","args","$options","goBack","_hoisted_6","_hoisted_7","placeholder","$data","cacheProductsSearch","$event","delCacheProductSearch","_hoisted_8","_Fragment","_renderList","filterProductsSearch","splice","key","_toDisplayString","title","checked","cacheProductArea","getProduct","notFoundData","_hoisted_10","computed","mapState","productStore","regex","RegExp","filter","match","methods","mapActions","removeFilterSearch","$router","go","updateNotFoundData","watch","created","getProducts","__exports__","render"],"sourceRoot":""}