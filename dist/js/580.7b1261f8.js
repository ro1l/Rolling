"use strict";(self["webpackChunkrolling"]=self["webpackChunkrolling"]||[]).push([[580],{5580:function(r,e,t){t.r(e),t.d(e,{default:function(){return B}});var s=t(6252),l=t(3577);const o={class:"order-box"},a=(0,s._)("header",{class:"order-bg"},[(0,s._)("p",{class:"logo"},"Rolling"),(0,s._)("div",{class:"title"},[(0,s._)("h1",null,"訂單明細")])],-1),d={class:"order"},i={class:"products order-bg"},n=(0,s._)("caption",{class:"text-shallow"},"商品明細",-1),u=(0,s._)("thead",null,[(0,s._)("tr",{class:"order-bg"},[(0,s._)("th",{class:"order-bg"},"品名"),(0,s._)("th",{class:"order-bg"},"數量"),(0,s._)("th",{class:"order-bg"},"金額")])],-1),c={class:"item-underline"},_={class:"item-underline"},h={class:"item-underline"},g=(0,s._)("th",{class:"bg-color"},null,-1),p=(0,s._)("th",{class:"bg-color"},"總計",-1),b={class:"bg-color"},w={class:"user"},m=(0,s._)("caption",{class:"text-shallow"},"訂購人資訊",-1),y={class:"item-underline"},k=(0,s._)("th",null,"姓名",-1),f={class:"item-underline"},v=(0,s._)("th",null,"手機",-1),z={class:"item-underline"},D=(0,s._)("th",null,"姓名",-1),x={class:"item-underline"},L=(0,s._)("th",null,"電子郵件",-1),$={class:"item-underline"},I=(0,s._)("th",null,"寄送地址",-1),O={class:"item-underline"},S=(0,s._)("th",null,"備註",-1),j={key:0},W={key:1},Z={key:0,class:"item-underline"},q=(0,s._)("th",null,"付款狀態",-1),C=(0,s._)("td",null,"付款完成",-1),E=[q,C],H={key:0,class:"button-box"},M=(0,s._)("button",{class:"pay fill-btn"},"確認付款",-1),N=[M],T={key:1,class:"button-box"},Y={class:"home"};function F(r,e,t,q,C,M){const F=(0,s.up)("router-link"),K=(0,s.up)("Form"),R=(0,s.up)("Loading");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",o,[a,(0,s._)("div",d,[(0,s.Wm)(K,{onSubmit:M.payOrder},{default:(0,s.w5)((()=>[(0,s._)("table",i,[n,u,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(C.order.products,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",c,(0,l.zw)(e.product.title),1),(0,s._)("td",_,(0,l.zw)(e.qty)+(0,l.zw)(e.product.unit),1),(0,s._)("td",h,"NT$"+(0,l.zw)(r.$filters.currency(e.product.price)),1)])))),128))]),(0,s._)("tfoot",null,[(0,s._)("tr",null,[g,p,(0,s._)("th",b,"NT$"+(0,l.zw)(r.$filters.currency(C.order.total)),1)])])]),(0,s._)("table",w,[m,(0,s._)("tbody",null,[(0,s._)("tr",y,[k,(0,s._)("td",null,(0,l.zw)(C.order.user.name),1)]),(0,s._)("tr",f,[v,(0,s._)("td",null,(0,l.zw)(C.order.user.tel),1)]),(0,s._)("tr",z,[D,(0,s._)("td",null,(0,l.zw)(C.order.user.name),1)]),(0,s._)("tr",x,[L,(0,s._)("td",null,(0,l.zw)(C.order.user.email),1)]),(0,s._)("tr",$,[I,(0,s._)("td",null,(0,l.zw)(C.order.user.address),1)]),(0,s._)("tr",O,[S,C.order.message>0?((0,s.wg)(),(0,s.iD)("td",j,(0,l.zw)(C.order.message),1)):((0,s.wg)(),(0,s.iD)("td",W,"無備註"))]),!0===C.order.is_paid?((0,s.wg)(),(0,s.iD)("tr",Z,E)):(0,s.kq)("",!0)])]),!1===C.order.is_paid?((0,s.wg)(),(0,s.iD)("div",H,N)):((0,s.wg)(),(0,s.iD)("div",T,[(0,s._)("button",Y,[(0,s.Wm)(F,{to:{name:"home"},class:"border-btn"},{default:(0,s.w5)((()=>[(0,s.Uk)(" 回首頁 ")])),_:1})])]))])),_:1},8,["onSubmit"])])]),(0,s.Wm)(R,{active:C.isLoading},null,8,["active"])],64)}var K=t(6154),R={data(){return{order:{user:{}},orderId:"",isLoading:!1}},methods:{async getOrder(){this.isLoading=!0;const r=`https://vue3-course-api.hexschool.io/api/je-api/order/${this.orderId}`;try{const e=await K.Z.get(r);this.isLoading=!1,this.order=e.data.order}catch(e){console.error("Error 找不到資料",e)}},async payOrder(){this.isLoading=!0;const r=`https://vue3-course-api.hexschool.io/api/je-api/pay/${this.orderId}`;try{const e=await K.Z.post(r);this.isLoading=!1,e.data.success&&(this.getOrder(),this.pushMessageState(e))}catch(e){console.error("Error 找不到資料",e)}}},created(){this.orderId=this.$route.params.orderId,this.getOrder()},inject:["pushMessageState"]},U=t(3744);const A=(0,U.Z)(R,[["render",F]]);var B=A}}]);
//# sourceMappingURL=580.7b1261f8.js.map